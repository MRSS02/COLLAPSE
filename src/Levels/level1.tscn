[gd_scene load_steps=8 format=2]

[ext_resource path="res://assets/sprites/1.png" type="Texture" id=1]
[ext_resource path="res://src/Tilesets/tileset.tres" type="TileSet" id=2]
[ext_resource path="res://src/Actors/PlusGuy.tscn" type="PackedScene" id=4]
[ext_resource path="res://src/Actors/MinusGuy.tscn" type="PackedScene" id=5]
[ext_resource path="res://src/Levels/level.gd" type="Script" id=6]
[ext_resource path="res://assets/sprites/plaquita_1.png" type="Texture" id=8]

[sub_resource type="GDScript" id=2]
script/source = "extends Actor
class_name Player

export var orientation: = 1 
var facing_right = true
var walking = false
onready var _animated_sprite = $AnimatedSprite

func _ready() -> void:
	if orientation == 1:
		facing_right = true
	else:
		facing_right = false 

func _process(_delta):
	if Input.is_action_pressed(\"move_right\"):
		walking = true
		if orientation == 1:
			facing_right = true
		else:
			facing_right = false 
	else: 
		if Input.is_action_pressed(\"move_left\"):
			walking = true
			if orientation == 1:
				facing_right = false
			else:
				facing_right = true
		else:
			walking = false  
	if facing_right:
		if orientation == 1:
			if walking && is_on_floor():
				_animated_sprite.play(\"walk_right_plus\")
			else:
				_animated_sprite.play(\"idle_right_plus\")
		else:
			if walking && is_on_floor():
				_animated_sprite.play(\"walk_right_minus\")
			else:
				_animated_sprite.play(\"idle_right_minus\") 
		
	else:
		if orientation == 1:
			if walking && is_on_floor():
				_animated_sprite.play(\"walk_left_plus\")
			else:
				_animated_sprite.play(\"idle_left_plus\")
		else:
			if walking && is_on_floor():
				_animated_sprite.play(\"walk_left_minus\")
			else:
				_animated_sprite.play(\"idle_left_minus\") 

func get_direction() -> Vector2:
	return Vector2(
		Input.get_action_strength(\"move_right\") - Input.get_action_strength(\"move_left\"), 
		-0.6 if Input.is_action_just_pressed(\"jump\") and is_on_floor() else 0.0 
	)

func set_orientation(value: int) -> void:
	orientation = value

func eliminate(value) -> void:
	value.hide()
	value.get_node(\"CollisionShape2D\").disabled = true 

func _physics_process(delta: float) -> void:
	var direction: = get_direction() 
	velocity.x = (maxspeed.x) * direction.x * orientation
	velocity.y += (maxspeed.y) * direction.y
	#print(direction.x, is_on_floor()) 
	velocity = move_and_slide(velocity)
	for i in get_slide_count():
		var collision = get_slide_collision(i)
		#print(collision.collider.name)
		if collision.collider.has_method(\"set_orientation\") && orientation == 1 && collision.collider.orientation == -1:
			get_parent().in_shock += 2
			eliminate(collision.collider)
			eliminate(self)
"

[node name="LevelTemplate3" type="Node2D"]
position = Vector2( 1, 1 )
script = ExtResource( 6 )

[node name="TileMap" type="TileMap" parent="."]
position = Vector2( -305, 118 )
tile_set = ExtResource( 2 )
cell_size = Vector2( 48, 48 )
collision_layer = 8
collision_mask = 0
format = 1
tile_data = PoolIntArray( -589832, 36, 0, -655340, 36, 0, -524296, 36, 0, -589804, 36, 0, -458760, 36, 0, -524268, 36, 0, -393224, 36, 0, -458732, 36, 0, -327688, 36, 0, -393196, 36, 0, -262152, 36, 0, -327660, 36, 0, -196616, 36, 0, -262124, 36, 0, -131080, 36, 0, -196588, 36, 0, -65544, 36, 0, -131052, 36, 0, -8, 36, 0, -65516, 36, 0, 65528, 36, 0, 20, 36, 0, 131064, 36, 0, 131065, 4, 0, 131066, 7, 0, 131067, 7, 0, 131068, 3, 0, 131069, 4, 0, 131070, 7, 0, 131071, 7, 0, 65536, 3, 0, 65537, 4, 0, 65538, 7, 0, 65539, 7, 0, 65540, 3, 0, 65541, 4, 0, 65542, 7, 0, 65543, 7, 0, 65544, 3, 0, 65545, 4, 0, 65546, 7, 0, 65547, 7, 0, 65548, 3, 0, 65549, 4, 0, 65550, 7, 0, 65551, 7, 0, 65552, 3, 0, 65553, 4, 0, 65554, 7, 0, 65555, 7, 0, 65556, 36, 0, 196600, 36, 0, 196601, 5, 0, 196602, 5, 0, 196603, 5, 0, 196604, 5, 0, 196605, 5, 0, 196606, 5, 0, 196607, 5, 0, 131072, 5, 0, 131073, 5, 0, 131074, 5, 0, 131075, 5, 0, 131076, 5, 0, 131077, 5, 0, 131078, 5, 0, 131079, 5, 0, 131080, 5, 0, 131081, 5, 0, 131082, 5, 0, 131083, 5, 0, 131084, 5, 0, 131085, 5, 0, 131086, 5, 0, 131087, 5, 0, 131088, 5, 0, 131089, 5, 0, 131090, 5, 0, 131091, 5, 0, 131092, 36, 0, 262136, 36, 0, 262137, 11, 0, 262138, 11, 0, 262139, 11, 0, 262140, 11, 0, 262141, 11, 0, 262142, 11, 0, 262143, 11, 0, 196608, 11, 0, 196609, 11, 0, 196610, 11, 0, 196611, 11, 0, 196612, 10, 0, 196613, 10, 0, 196614, 10, 0, 196615, 11, 0, 196616, 11, 0, 196617, 11, 0, 196618, 11, 0, 196619, 11, 0, 196620, 11, 0, 196621, 11, 0, 196622, 11, 0, 196623, 11, 0, 196624, 11, 0, 196625, 11, 0, 196626, 11, 0, 196627, 11, 0, 196628, 36, 0, 327672, 36, 0, 327673, 44, 0, 327674, 44, 0, 327675, 44, 0, 327676, 44, 0, 327677, 44, 0, 327678, 44, 0, 327679, 44, 0, 262144, 44, 0, 262145, 44, 0, 262146, 44, 0, 262147, 44, 0, 262148, 44, 0, 262149, 44, 0, 262150, 44, 0, 262151, 44, 0, 262152, 44, 0, 262153, 44, 0, 262154, 44, 0, 262155, 44, 0, 262156, 44, 0, 262157, 44, 0, 262158, 44, 0, 262159, 44, 0, 262160, 44, 0, 262161, 44, 0, 262162, 44, 0, 262163, 44, 0, 262164, 36, 0 )

[node name="Player1" parent="." instance=ExtResource( 4 )]
position = Vector2( -375, 262 )
collision_mask = 29
script = SubResource( 2 )

[node name="Player0" parent="." instance=ExtResource( 5 )]
position = Vector2( 390, 259 )
collision_mask = 45

[node name="Camera2D" type="Camera2D" parent="."]
position = Vector2( -1, -1 )

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="TextureRect" type="TextureRect" parent="CanvasLayer"]
margin_left = 23.0
margin_top = 11.0
margin_right = 173.0
margin_bottom = 59.0
texture = ExtResource( 8 )
__meta__ = {
"_edit_use_anchors_": true
}

[node name="TextureRect2" type="TextureRect" parent="CanvasLayer"]
margin_left = 115.0
margin_top = 20.0
margin_right = 155.0
margin_bottom = 60.0
rect_scale = Vector2( 0.5, 0.75 )
rect_pivot_offset = Vector2( 20, 9.33333 )
texture = ExtResource( 1 )
__meta__ = {
"_edit_use_anchors_": true
}
